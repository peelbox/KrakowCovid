---
title: "Sesión 3"
author: "Kifirifis"
date: "26/10/2020"
output: html_document
---
## Sesión 3 Intro a RMarkdown 
 Markdown es mucho más poderoso que jupyter, esto es evidente. Tiene la capacidad de renderizar en html, pdf a través de LáTex, incluir `chunks` en diversos lenguajes etc., Además es posible utilizar CSS para darle formato al documento y por supuesto JS, una maravilla. Así que vamos a continuar esta clase desde RMarkdown. 
 
### Funciones y loops 
 
 Las funciones son importantes en cualquier lenguaje de programación dado que nos permiten ahorrar tiempo y automatizar tareas. 
 
 Vamos a insertar código a continuación con la pestaña de insert o bien con el shortcut control + alt + i
 
```{r}
mifuncion <- function() {
        print("Hola Mundo")
}
mifuncion()
```
Cómo ves el comando básico es la función `function()` que en el caso anterior es una función anónima. Los argumentos podemos declararlos dentro de los paréntesis.

```{r}
mifuncion <- function(x) {
        x + 1
}
```
Cuando declaramos una variable dentro de la función esta no está disponible en el entorno global, sólo dentro de la función. 

```{r}
mifuncion <- function(x) {
        var1 <- x + 1 
}
mifuncion(2)
ls()
var2 <- 98
ls(globalenv()) 
```
Observa que la variable 1 no aparece en el entorno global y la función no regresa nada, para que devuelva algo tenemos que utilizar `return` ahí dentro. 

```{r}
mifuncion <- function(x) {
        var1 <- x + 1 
        return(var1)
}
mifuncion(56)
```
*Tu turno:* Crea una función que te devuelva la media de un vector, acuerdate que un vector numérico sería `c(1,2,3,4,5)`.

----------------------------------------

Ahora pasemos a los loops. El loop básico es el `for loop` pero también existe una familia de loops dentro de R que se llaman `apply()` 

```{r}
?apply()
```

En general los loops en R son un poco lentos (cada vez menos) y cuando hablamos de procesos pesados yo personalmente utilizo Julia, antes utilizaba Python pero Julia es increíblemente rápida, casi como `C`. De cualquier manera para pocos millones de filas los loops de R van aceptablemente bien. 

```{r}
for (i in c("Elefante", "Águila", "Pingüino")) {
        print(i)
}
```

También podría declarar la variable fuera:

```{r}
a <- c("Elefante", "Águila", "Pingüino")
for (i in a) {
        print(paste("Veo un", i))
}
```
Es posible declara una variable vacía por fuera e ir indexando los elementos 

```{r}
a <- numeric()
for (i in 1:10) {  #Los dos punto significan del 1 al 10
        a[i] <- mifuncion(i)  #¿Te acuerdas que creamos esta función allá arriba?
}
a
```
La idea de `apply` es la misma que el for loop pero aveces va mejor con data.frames. 

```{r}
sapply(a, function(x) { #En este caso toma como índice al objeto "a" y a cada uno de sus elementos les hace algo
        x * 0.21
}) -> sap 
sap
class(sap)
```
<--! TODO Terminar sesión 3 -->


